:root{
    --bg:#f6fbff;
    --muted:#6b7280;
    --accent-start:#2b8cbe;
    --accent-end:#7b3294;
    --danger:#ff4d4f;
    --card:#ffffff;
}

*{box-sizing:border-box}
body{
    font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    margin:0;
    background: linear-gradient(180deg,var(--bg),#eef6fc);
    color:#0f172a;
}

.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

.site-header{
    display:flex;align-items:center;justify-content:space-between;padding:14px 20px;border-bottom:1px solid rgba(15,23,42,0.04);background:transparent
}
.brand{display:flex;gap:12px;align-items:center}
.logo{font-size:28px}
.brand h1{font-size:18px;margin:0}
.brand .tag{margin:0;font-size:12px;color:var(--muted)}

.top-actions button{margin-left:8px}
.top-actions .danger.small{background:var(--danger);color:white;padding:8px 12px;border-radius:8px;border:none}
.top-actions .ghost{background:transparent;border:1px solid rgba(15,23,42,0.06);padding:8px 12px;border-radius:8px}

.layout{display:flex;gap:18px;padding:18px;align-items:flex-start}
.panel{width:340px;flex:0 0 340px;background:var(--card);border-radius:12px;padding:18px;box-shadow:0 10px 30px rgba(11,45,87,0.06);border:1px solid rgba(11,45,87,0.04)}
.panel-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.panel-head h2{margin:0;font-size:16px}
.badge.premium{background:linear-gradient(90deg,var(--accent-start),var(--accent-end));color:white;padding:6px 8px;border-radius:8px;font-weight:600;font-size:12px}

.form input{width:100%;padding:12px;border-radius:10px;border:1px solid #e6eef9;margin-bottom:10px;font-size:14px}
.btn-row{display:flex;gap:10px}
.primary{flex:1;background:linear-gradient(90deg,var(--accent-start),var(--accent-end));color:white;padding:11px;border-radius:10px;border:none;cursor:pointer}
.danger{background:var(--danger);color:white;padding:11px;border-radius:10px;border:none;cursor:pointer}

.info-card{margin-top:12px;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfdff);border:1px solid rgba(11,45,87,0.03)}
.info-card.small{padding:10px;font-size:13px}
.info-card h3{margin:0 0 6px 0}

.dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:8px;vertical-align:middle}
.dot.safe{background:green}
.dot.medium{background:orange}
.dot.high{background:red}

.panel-foot{margin-top:10px;color:var(--muted);font-size:13px}

.map-area{flex:1;min-height:70vh}
#map{height:72vh;width:100%;border-radius:16px;box-shadow:inset 0 -6px 20px rgba(11,45,87,0.03),0 12px 40px rgba(11,45,87,0.08);border:1px solid rgba(11,45,87,0.04);opacity:0;transform:translateY(6px);animation:mapFadeIn 0.8s ease 0.25s forwards}

.leaflet-container{border-radius:12px}

/* Small screens */
@media (max-width:980px){
    .layout{flex-direction:column;padding:12px}
    .panel{width:auto;order:2}
    .map-area{order:1}
    #map{height:56vh}
}

/* Intro Screen */
#introScreen{position:fixed;inset:0;background:linear-gradient(135deg,#0f172a,#0b1220);color:white;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1400;animation:fadeOut 1s ease 2.8s forwards}
#introScreen h1{font-size:42px;margin:0 0 8px}
#introScreen p{margin:0;color:rgba(255,255,255,0.85)}
@keyframes fadeOut{to{opacity:0;visibility:hidden}}
@keyframes mapFadeIn{to{opacity:1;transform:none}}

/* Legend cleanup (glass) */
#legend{background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.03));padding:12px;border-radius:10px}

.leaflet-interactive{filter:drop-shadow(0 8px 30px rgba(11,45,87,0.08))}

/* Inputs (glass) */
.form input{background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02));backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,0.12);box-shadow:inset 0 4px 10px rgba(11,45,87,0.03);transition:transform .25s ease,border-color .25s ease,box-shadow .25s ease}
.form input::placeholder{color:rgba(255,255,255,0.7);font-style:italic}
.form input:focus{outline:none;border-color:rgba(108,92,231,0.85);box-shadow:0 8px 30px rgba(108,92,231,0.08);transform:scale(1.02)}

/* Buttons */
.primary{box-shadow:0 6px 18px rgba(108,92,231,0.12);transition:transform .28s ease,box-shadow .28s ease}
.primary:hover{transform:translateY(-2px);box-shadow:0 18px 40px rgba(108,92,231,0.18)}
.danger.sosPulse{animation:smallPulse 1.6s infinite;box-shadow:0 8px 30px rgba(255,77,79,0.12)}
@keyframes smallPulse{0%{transform:scale(1);box-shadow:0 0 0 0 rgba(255,77,79,0.12)}70%{transform:scale(1.03);box-shadow:0 0 0 12px rgba(255,77,79,0)}100%{transform:scale(1);box-shadow:0 0 0 0 rgba(255,77,79,0)}}

/* Risk card styling */
.risk-card{display:flex;flex-direction:column;gap:6px;align-items:flex-start}
.risk-card.safe{border-left:4px solid #6ee7b7}

/* Toast container */
#toastContainer{position:fixed;top:18px;right:18px;z-index:2000;display:flex;flex-direction:column;gap:12px}
.toast{min-width:300px;max-width:420px;padding:12px 14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02));backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,0.12);box-shadow:0 12px 30px rgba(11,45,87,0.12);display:flex;gap:12px;align-items:flex-start;transform:translateX(24px);opacity:0;animation:toastIn .36s cubic-bezier(.2,.9,.2,1) forwards}
.toast .icon{font-size:20px;margin-top:2px}
.toast.success{border-left:4px solid #34d399}
.toast.danger{border-left:4px solid #ff6b6b;box-shadow:0 18px 40px rgba(255,107,107,0.14)}
@keyframes toastIn{to{transform:none;opacity:1}}
.toast.hide{animation:toastOut .28s ease forwards}
@keyframes toastOut{to{opacity:0;transform:translateX(24px)}}

/* Loading overlay & shimmer */
.loading-overlay{position:fixed;right:24px;top:80px;z-index:1900;display:flex;flex-direction:column;align-items:center;gap:10px;padding:12px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.06);box-shadow:0 12px 30px rgba(11,45,87,0.08)}
.loading-overlay.hidden{display:none}
.shimmer-card{width:220px;padding:12px;border-radius:10px;overflow:hidden}
.shimmer-line{height:12px;background:linear-gradient(90deg,rgba(255,255,255,0.04),rgba(255,255,255,0.12),rgba(255,255,255,0.04));border-radius:6px;animation:shimmer 1.6s infinite}
.shimmer-line.title{height:14px;width:70%;margin-bottom:8px}
.shimmer-line.short{width:50%}
@keyframes shimmer{0%{background-position:-260px 0}100%{background-position:260px 0}}

/* small responsive updates */
@media (max-width:480px){
    #toastContainer{left:12px;right:12px;top:auto;bottom:16px}
    .loading-overlay{right:12px;top:auto;bottom:84px}
    .panel{width:auto;padding:14px}
    #map{height:56vh}
}